# -----------------------------
# Customer and Order Queries
# -----------------------------

type Customer {
  customernumber: Int!
  customername: String!
  contactlastname: String
  contactfirstname: String
  phone: String
  addressline1: String
  addressline2: String
  city: String
  state: String
  postalcode: String
  country: String
  salesrepemployeenumber: Int
  creditlimit: String
  orders: [Order]
    @materializer(query: "customerOrders", arguments: [{ name: "customerId", field: "customernumber" }])
  payments: [Payment]
    @materializer(query: "customerPayments", arguments: [{ name: "customerId", field: "customernumber" }])
}

type Order {
  ordernumber: Int!
  orderdate: String!
  requireddate: String!
  shippeddate: String
  status: String!
  comments: String
  customernumber: Int!
  orderdetails: [OrderDetail]
    @materializer(query: "orderDetails", arguments: [{ name: "orderNumber", field: "ordernumber" }])
}

type OrderDetail {
  ordernumber: Int!
  productcode: String!
  quantityordered: Int!
  priceeach: String!
  orderlinenumber: Int!
}

type Payment {
  customernumber: Int!
  checknumber: String!
  paymentdate: String!
  amount: String!
}

type Query {
  customers: [Customer]
    @rest(
      method: GET
      endpoint: "https://qnap-jiri.myqnapcloud.com/classic-models/api/v1/customers/"
      configuration: "classic_models"
      tls: "classic_models"
      headers: [
        { name: "Authorization", value: "Bearer $access" }
      ]
    )

  customer(id: Int!): Customer
    @rest(
      method: GET
      endpoint: "https://qnap-jiri.myqnapcloud.com/classic-models/api/v1/customers/$id/"
      configuration: "classic_models"
      tls: "classic_models"
      headers: [
        { name: "Authorization", value: "Bearer $access" }
      ]
    )

  customerOrders(customerId: Int!): [Order]
    @rest(
      method: GET
      endpoint: "https://qnap-jiri.myqnapcloud.com/classic-models/api/v1/customers/$customerId/orders/"
      configuration: "classic_models"
      tls: "classic_models"
      headers: [
        { name: "Authorization", value: "Bearer $access" }
      ]
    )

  orderDetails(orderNumber: Int!): [OrderDetail]
    @rest(
      method: GET
      endpoint: "https://qnap-jiri.myqnapcloud.com/classic-models/api/v1/orders/$orderNumber/order-details/"
      configuration: "classic_models"
      tls: "classic_models"
      headers: [
        { name: "Authorization", value: "Bearer $access" }
      ]
    )

  customerPayments(customerId: Int!): [Payment]
    @rest(
      method: GET
      endpoint: "https://qnap-jiri.myqnapcloud.com/classic-models/api/v1/customers/$customerId/payments/"
      configuration: "classic_models"
      tls: "classic_models"
      headers: [
        { name: "Authorization", value: "Bearer $access" }
      ]
    )
}